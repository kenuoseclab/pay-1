<?phpnamespace Admin\Controller;/** * 投诉保证金 控制器 * Class DepositController * @package Admin\Controller */class DepositController extends BaseController{    /**     * 投诉保证金设置     */    public function index()    {        $info = M('ComplaintsDepositRule')->where(['id' => 1, 'is_system' => 1])->find();        $info['freeze_time'] = $info['freeze_time'] / 3600;        $this->assign('info', $info);        $this->display();    }    public function codeindex()    {        $info = M('ComplaintsCodedepositRule')->where(['id' => 1, 'is_system' => 1])->find();        $info['freeze_time'] = $info['freeze_time'] / 60;        $this->assign('info', $info);        $this->display();    }    /**     * 修改保证金规则     */    public function editCodeConfig()    {        $data = I('post.data', '');        $result = 0;        if (IS_POST) {            $data['id'] = 1;            $data['is_system'] = 1;            $data['freeze_time'] = $data['freeze_time'] * 60;            $result = M('ComplaintsCodedepositRule')->where(['id' => $data['id']])->save($data);            if ($result !== false) {                $this->ajaxReturn(['status' => 1, 'msg' => '修改成功']);            } else {                $this->ajaxReturn(['status' => 0, 'msg' => '修改失败']);            }        }        $this->ajaxReturn(['status' => $result]);    }    /**     * 修改保证金规则     */    public function editConfig()    {        $data = I('post.data', '');        $result = 0;        if (IS_POST) {            if ($data['ratio'] < 0 || $data['ratio'] > 100) {                $this->ajaxReturn(['status' => 0, 'msg' => '比例必须在0到100之间']);            }            $data['id'] = 1;            $data['is_system'] = 1;            $data['freeze_time'] = $data['freeze_time'] * 3600;            $result = M('ComplaintsDepositRule')->where(['id' => $data['id']])->save($data);            if ($result !== false) {                $this->ajaxReturn(['status' => 1, 'msg' => '修改成功']);            } else {                $this->ajaxReturn(['status' => 0, 'msg' => '修改失败']);            }        }        $this->ajaxReturn(['status' => $result]);    }}